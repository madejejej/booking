#= require_self
#= require_tree ./modules
#= require_tree ./services/main
#= require_tree ./controllers/main
#= require_tree ./directives/main
#= require_tree ./filters/main


@App = angular.module('App', ['App.services','App.controllers','ngRoute'])

@App.config ($routeProvider, $locationProvider) ->
  $locationProvider.html5Mode(true)
  $routeProvider
    .when "/",
      templateUrl: "<%= asset_path("home.html") %>"
    .when "/login",
      templateUrl: "<%= asset_path("login.html") %>"
      controller: 'LoginController'
    .when "/register",
      templateUrl: "<%= asset_path("register.html") %>"
      controller: 'LoginController'
    .when "/movies",
      templateUrl: "<%= asset_path("movies/index.html") %>"
      controller: 'MoviesListingController'
    .when "/movies/:movie_id/shows",
      templateUrl: "<%= asset_path("movies/shows.html") %>"
      controller: 'ShowsListingController'
    .when "/movies/:movie_id",
      templateUrl: "<%= asset_path("movies/show.html") %>"
      controller: 'MovieController'
    .when "/cinemas/:cinema_id/screens",
      templateUrl: "<%= asset_path("cinemas/screens.html") %>"
      controller: 'ScreenListingController'
@App.config [
    "$httpProvider"
    ($httpProvider) ->
        $httpProvider.defaults.headers.common["X-CSRF-Token"] = $("meta[name=csrf-token]").attr("content")
]
