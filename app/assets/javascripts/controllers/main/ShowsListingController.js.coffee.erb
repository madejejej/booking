@controllers.controller('ShowsListingController',
        ['$scope', '$routeParams', '$modal', 'ShowService', ($scope, $routeParams, $modal, ShowService) ->

            $scope.movieId = $routeParams.movie_id

            $scope.shows = ShowService.queryShows($scope.movieId)

            $scope.alerts = []

            $scope.openReservationDialog = (showId) ->
                modalInstance = $modal.open
                    templateUrl: '<%= asset_path("reservation/reservationDialog.html") %>',
                    controller: 'ReservationDialogController'
                    resolve:
                        showId: () ->
                            showId
                        movieId: () ->
                            $scope.movieId
                modalInstance.result.then( (result) ->
                    $scope.alerts.push({msg: result.message, type: result.type})
                )

            $scope.closeAlert = (index) ->
                $scope.alerts.splice(index, 1);

            return
        ])
